{#
  Notification Popup  Widget

  Owner : Komal Chandarana

  	The widget is using plugin called toastr. Here are all the option avaiable. If we ever need to extent it. http://codeseven.github.io/toastr/demo.html 
  
  Configurables:
    - customJSON
        eventNamePopup : name of template to be rendered 
        typePopup      : kind of popup which user need to show. 
        				 - success 
        				 - info
        				 - warning
        				 - error
        title		   : title for the pop up

        timeout        : the period when the popup is displayed,  specified number of milliseconds
        closeButton      : the value is true : user need to show a closebutton , false otherwise

        showButton      : the value is true : user need to show a button , false otherwise

#}

{% extends 'layout.html' %}

{% block head %}
<style type='text/css'>
.due{
	color: #5D5D5D;
	font-size: 12px;
}
.detail{
	font-size: 10px;
	margin: 0px;
	margin-top: 10px;
	color:#5D5D5D;
}
.imp {
	width: 30%;
	float: left;
	margin-right: 20px;
	background-color: #EDEEEE;
	border-radius: 3px;
	border: 1px;
}

.high{
	color: red;
	border: 1px;
	border-color: black;
	font-size: 12px;
}
.updatedEvent {
  background-color: #5FB404;
}
.informationDates{
	background-color: #FFFFFF;
  color: black;
  -moz-border-radius: 50px 50px 20px 20px;
-webkit-border-radius: 10px 10px 10px 10px;
border-radius: 5px 5px 5px 5px;
margin-left: 15px
}
</style>
{% endblock %}
{% block js %}
	com_bridge_way_editors/toaster.js
{% endblock %}

{% block less %}
	com_bridge_way_editors/css/toaster.css
{% endblock %}

{% block body %}
	<div ng-controller="{{id}}notificationCtrl as main">
		<toaster-container toaster-options="{'time-out':{{angular('timeout')}},'position-class':'toast-center' , 'close-button':'{{angular('closeButton')}}'}"></toaster-container >
		
		<div  ng-if="showButton==true">
       		<div class="row" >
	            <div class="{{cssClass}}">
		            <button class="btn {{editorClass}}" ng-click="pop()">
		                {%- if customJson.btnIconClass -%}
		                  <i class="{{customJson.btnIconClass}}"></i>
		                {%- endif -%}
		              <p>{{caption}}</p>
		            </button>
	            </div>
	        </div>
        <div>
	</div>
{% endblock %}

{% block script %}

	angular.module('{{id}}app', ['ngRoute','ngAnimate','toaster'])
    .controller('{{id}}notificationCtrl', function($scope, toaster,$rootScope) {
	$scope.intTypePopup="success";
	$scope.closeButton = true;
	$scope.timeout = 10000;
	$scope.showButton = false;

	{% if customJson.timeout %}
	       $scope.timeout = {{json(customJson.timeout)}};
	{% endif %}

	{% if customJson.typePopup %}
	       $scope.intTypePopup = {{json(customJson.typePopup)}};
	{% endif %}

	{% if customJson.closeButton %}
	       $scope.closeButton = {{json(customJson.closeButton)}};
	{% endif %}
   
   {% if customJson.showButton %}
	       $scope.showButton = {{json(customJson.showButton)}};
	{% endif %}

    $scope.pop = function(){
    	toaster.pop($scope.intTypePopup, $scope.popupData.title, "{{id}}{{customJson.eventNamePopup}}", null, 'template')
    };

	{% if angular('$rootScope.sharedData.popupData') != undefined %}
		console.log('there');
		$scope.popupData=$rootScope.sharedData.popupData;
          
          if($scope.popupData.attendees)
          {
           $scope.attendees=$scope.popupData.attendees;
           console.log("creado");
           $scope.stringAttendes='';
           $scope.attendees.forEach(function(entry) {
                $scope.stringAttendes+=entry+', ';
            });
          }else{
          console.log("no creado");
          }
          
       
	{% else %}
		console.log('here');
		$scope.popupData={
	        title:"some tittle for BCL EVENT",
	        period:"date 1 to date 2",
	        footer:"footer data"
	  	};
	{% endif %}

    $rootScope.$on('{{id}}{{customJson.eventNamePopup}}', function(event, args){
        console.log('open popup!');
        $scope.pop();
      }
    );

 
	  $scope.clear = function(){
	        toaster.clear();
	  };

    });
 
 	addApp('{{id}}app');
{% endblock %}

{% block footer %} 
	<script type="text/ng-template" id="{{id}}createTask">

	<div>
		<div>Assigned to: <br/>
			christianmeyer@acme.com
		</div>
		<div class="detail"> Tasks Detail
		</div>
		<div> Filling Doucments for Wright Brothers Issue
		</div>
		<br/>
		<div>
			<div class="imp">
				<div class="high"> High Priority <img src="" />
				</div>
				<div class="due">
					Due Date </br>
					June 6, 2014
				</div>
			</div>
			<div class="data">
			Lorem ipsum dolor sit amet, per erat tation consequat ad, laoreet atomorum nec ei. Diam audiam mel cu, usu cu vitae quidam theophrastus. Ex ubique explicari mea. Veniam mucius vituperata usu an, ut graece dolorem deseruisse sed.
			</div>
		</div>
	</div>
	</script>

<script type="text/ng-template" id="{{id}}eventUpdateBCL">
   <div class="updatedEvent">
		
	     <div class="row">
	     <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">Invite Send to: </div>
	     <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">{{angular("stringAttendes")}}
	      </div>
		
	     <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> Meeting Details
	      </div>
	     <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><h3> Meeting with  {{angular("popupData.matter")}}</h3> 
	     </div>
		    
		     <div class="informationDates col-xs-5 col-sm-5 col-md-5 col-lg-5">
		     {{angular("popupData.startTime")}} <br>
		     {{angular("popupData.startDate")}}
		     </div>
		     <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
		     {{angular("popupData.location")}}
		     </div>     	
	     </div>
     </div>
  
	</script>
{% endblock %}